if((typeof Menu==="undefined")||(!Menu)){var Menu={}}Menu=function(){return{getSelectedNamesArray:function(b){var a=[];$.each(b,function(d,c){if(c.selected()){a.push(c.name)}});return a},getSelectedNames:function(c,a){var b="";$.each(c,function(e,d){if(d.selected()){b+=(b.length?", ":"")+d.name}});return b.length?b:a},getSelectedValues:function(d,c){var b=[];$.each(d,function(e,a){if(a.selected()){if(((typeof a[c])==="number")||((typeof a[c])==="string")){b.push(a[c])}else{$.each(a[c],function(f,g){b.push(g)})}}});return b},JSONMapToMenu:function(d,c){var b=[];$.each(d,function(e,a){b.push({name:a,id:e,active:ko.observable(true),disabled:ko.observable(false),selected:ko.observable(c?c.indexOf(e)!==-1:false).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})})});return b},JSONToMenu:function(c,b,a){return $.map(c,function(d){return $.extend({},d,{active:ko.observable(true),disabled:ko.observable(false),selected:ko.observable(b?b.indexOf(d[a])!==-1:false).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})})})},clone:function(a){return ko.observableArray($.map(a,function(b){return $.extend({},b,{active:ko.observable(b.active()),disabled:ko.observable(b.disabled()),selected:ko.observable(b.selected()).extend({rateLimit:{timeout:50,method:"notifyWhenChangesStop"}})})}))},sortByName:function(e,d){var c=e.name.toLowerCase(),f=d.name.toLowerCase();if(c<f){return -1}if(c>f){return 1}return 0},search:function(c,b){var a=b.toLowerCase();$.each(c,function(e,d){d.name.toLowerCase().indexOf(a)>=0?d.active(true):d.active(false)})},countSelected:function(b){var a=0;$.each(b,function(d,c){if(c.selected()){a++}});return a},countDisabled:function(b){var a=0;$.each(b,function(d,c){if(c.disabled()){a++}});return a},countActive:function(b){var a=0;$.each(b,function(d,c){if(c.active()){a++}});return a},activateAll:function(a){$.each(a,function(c,b){b.active(true)})},deactivateAll:function(a){$.each(a,function(c,b){b.active(false)})},select:function(b,a){$.each(b,function(d,c){if(Array.isArray(a)?(a.indexOf(c.id)!==-1):(typeof a=="number"?c.id===a.toString():c.id===a)){c.selected(true)}else{c.selected(false)}})},selectPattern:function(c,b){var a=b.toLowerCase();$.each(c,function(e,d){d.name.toLowerCase().indexOf(a)>=0?d.selected(true):d.selected(false)})},selectAll:function(a){$.each(a,function(c,b){if(!b.disabled()){b.selected(true)}})},unselectAll:function(a){$.each(a,function(c,b){b.selected(false)})},toggleSelection:function(c,a,b){b.stopPropagation();if((Menu.countSelected(c)+Menu.countDisabled(c))==c.length){Menu.unselectAll(c)}else{Menu.selectAll(c)}}}}();